#!/bin/bash

# Set posix mode
set -o posix;

report_date=$(date +%Y-%m-%d); # Sets file name later

# Set report path
report_path=/home/awesomepilot/Documents/Work/Notes

# Parse arguments and set variables
while getopts "n:p:e:b:h" arg; do
    case $arg in
        n)
            client_name=${OPTARG}
        ;;
        p)
            client_phone=${OPTARG}
        ;;
        e)
            client_email=${OPTARG}
        ;;
        b)
            client_bizz_name=${OPTARG}
        ;;
        h)
            cat ./usr/bin/help_doc.txt;
            exit 0
        ;;
        *)
            echo "Oops you may have made an invalid entry.  Pleae try again.";
            exit 1;
    esac
done

# Get work notes
echo "Enter work notes, hit Ctl-D to save>";
work=$(</dev/stdin);


# Set side notes
echo "Enter side notes if any, hit Ctl-D to save>"
notes=$(</dev/stdin);

# Create report at ~/$USER/Documents/Work/Notes/
cat > $report_path/$report_date.txt <<-_EOF_
(End of Day Report)
## Client Information ##
------------------------------------------
Client Name: $client_name
Client Phone: $client_phone
Client Email: $client_email
Client Business: $client_bizz_name
------------------------------------------
## Work Performed ##
------------------------------------------
$work
------------------------------------------
## Notes ##
------------------------------------------
$notes
------------------------------------------
_EOF_

echo "Report generated successuflly!"
cat $report_path/$report_date.txt;
